<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="BoundarySpace">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%233B82F6'/></svg>">
    <link rel="manifest" href="/mobile-manifest.json">
    <title>BoundarySpace Mobile</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #F9FAFB;
            color: #111827;
            line-height: 1.5;
        }
        
        .container {
            max-width: 100vw;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: #FFFFFF;
            padding: 20px;
            border-bottom: 1px solid #E5E7EB;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: bold;
            color: #111827;
        }
        
        .header p {
            color: #6B7280;
            margin-top: 4px;
        }
        
        .content {
            flex: 1;
            padding: 16px;
            padding-bottom: 80px;
        }
        
        .card {
            background: #FFFFFF;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .stats-row {
            display: flex;
            justify-content: space-around;
            margin-top: 16px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #111827;
        }
        
        .stat-label {
            font-size: 12px;
            color: #6B7280;
            margin-top: 4px;
        }
        
        .button {
            background: #3B82F6;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            width: 100%;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .button:hover {
            background: #2563EB;
        }
        
        .button.secondary {
            background: #EC4899;
        }
        
        .button.secondary:hover {
            background: #DB2777;
        }
        
        .setup-text {
            color: #6B7280;
            line-height: 1.6;
        }
        
        .tab-bar {
            background: #FFFFFF;
            border-top: 1px solid #E5E7EB;
            display: flex;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 10;
        }
        
        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .tab.active {
            border-top: 2px solid #3B82F6;
            color: #3B82F6;
        }
        
        .tab-text {
            font-size: 12px;
            color: #6B7280;
        }
        
        .tab.active .tab-text {
            color: #3B82F6;
            font-weight: 600;
        }
        
        .hidden {
            display: none;
        }
        
        .goal-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #F3F4F6;
        }
        
        .goal-info h3 {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 4px;
        }
        
        .goal-meta {
            font-size: 14px;
            color: #6B7280;
        }
        
        .check-buttons {
            display: flex;
            gap: 8px;
        }
        
        .check-btn {
            padding: 6px 12px;
            border-radius: 6px;
            border: none;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .check-btn.hit {
            background: #10B981;
            color: white;
        }
        
        .check-btn.missed {
            background: #EF4444;
            color: white;
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: capitalize;
        }
        
        .status-hit {
            background: rgba(16, 185, 129, 0.2);
            color: #10B981;
        }
        
        .relationship-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid #F3F4F6;
        }
        
        .relationship-name {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 4px;
        }
        
        .relationship-type {
            font-size: 14px;
            color: #6B7280;
        }
        
        .health-score {
            text-align: right;
        }
        
        .health-number {
            font-size: 18px;
            font-weight: bold;
            color: #10B981;
        }
        
        .health-label {
            font-size: 12px;
            color: #6B7280;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>BoundarySpace</h1>
            <p>Your personal boundary tracker</p>
        </div>
        
        <div class="content">
            <!-- Dashboard Screen -->
            <div id="dashboard" class="screen">
                <div class="card">
                    <div class="card-title">Today's Progress</div>
                    <div class="stats-row">
                        <div class="stat-item">
                            <div class="stat-number" id="todayEntries">0</div>
                            <div class="stat-label">Entries</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" style="color: #10B981;" id="todayRespected">0</div>
                            <div class="stat-label">Respected</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" style="color: #F59E0B;" id="todayChallenged">0</div>
                            <div class="stat-label">Challenged</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">Quick Actions</div>
                    <button class="button" onclick="logBoundary()">Log Boundary Experience</button>
                    <button class="button secondary" onclick="relationshipCheckIn()">Relationship Check-in</button>
                </div>
                
                <div class="card">
                    <div class="card-title">Setup Instructions</div>
                    <div class="setup-text">
                        1. This mobile web app connects to your Replit backend<br>
                        2. Use the Quick Actions to log experiences<br>
                        3. Check the Boundaries tab for daily goals<br>
                        4. Monitor relationship health in the Relationships tab
                    </div>
                </div>
            </div>
            
            <!-- Boundaries Screen -->
            <div id="boundaries" class="screen hidden">
                <div class="card">
                    <div class="card-title">Today's Goals</div>
                    <div id="goalsContainer">
                        <div class="goal-item">
                            <div class="goal-info">
                                <h3>Maintain work-life boundaries</h3>
                                <div class="goal-meta">work-life â€¢ daily</div>
                            </div>
                            <div class="check-buttons">
                                <button class="check-btn hit" onclick="checkIn('hit')">Hit</button>
                                <button class="check-btn missed" onclick="checkIn('missed')">Missed</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">My Boundaries</div>
                    <div class="setup-text">
                        Your personal boundaries will appear here once you create them in the full interface.
                    </div>
                </div>
            </div>
            
            <!-- Relationships Screen -->
            <div id="relationships" class="screen hidden">
                <div class="card">
                    <div class="card-title">Your Relationships</div>
                    <div id="relationshipsContainer">
                        <div class="relationship-item">
                            <div>
                                <div class="relationship-name">Example Person</div>
                                <div class="relationship-type">Dating</div>
                            </div>
                            <div class="health-score">
                                <div class="health-number">85%</div>
                                <div class="health-label">Health</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tab Navigation -->
        <div class="tab-bar">
            <button class="tab active" onclick="showScreen('dashboard')">
                <div class="tab-text">Dashboard</div>
            </button>
            <button class="tab" onclick="showScreen('boundaries')">
                <div class="tab-text">Boundaries</div>
            </button>
            <button class="tab" onclick="showScreen('relationships')">
                <div class="tab-text">Relationships</div>
            </button>
        </div>
    </div>
    
    <script>
        // Simple app state
        let currentScreen = 'dashboard';
        let checkIns = JSON.parse(localStorage.getItem('checkIns') || '{}');
        
        // API configuration - replace with your Replit URL
        const API_BASE_URL = window.location.origin; // Uses current Replit URL
        
        // Screen navigation
        function showScreen(screenName) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            
            // Show selected screen
            document.getElementById(screenName).classList.remove('hidden');
            
            // Update tab states
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.closest('.tab').classList.add('active');
            
            currentScreen = screenName;
        }
        
        // Goal check-in functionality
        function checkIn(status) {
            const today = new Date().toDateString();
            checkIns[today] = status;
            localStorage.setItem('checkIns', JSON.stringify(checkIns));
            
            // Update UI
            const goalItem = event.target.closest('.goal-item');
            const checkButtons = goalItem.querySelector('.check-buttons');
            checkButtons.innerHTML = `<div class="status-badge status-${status}">${status}</div>`;
            
            // Update stats
            updateStats();
            
            alert(`Goal marked as ${status}!`);
        }
        
        // Update dashboard stats
        function updateStats() {
            const today = new Date().toDateString();
            const todayStatus = checkIns[today];
            
            if (todayStatus === 'hit') {
                document.getElementById('todayEntries').textContent = '1';
                document.getElementById('todayRespected').textContent = '1';
            } else if (todayStatus === 'missed') {
                document.getElementById('todayEntries').textContent = '1';
                document.getElementById('todayChallenged').textContent = '1';
            }
        }
        
        // Quick action functions
        function logBoundary() {
            alert('Boundary logging feature - would connect to your backend API');
        }
        
        function relationshipCheckIn() {
            alert('Relationship check-in feature - would connect to your backend API');
        }
        
        // Load data on page load
        window.onload = function() {
            updateStats();
            
            // Check if today already has a check-in
            const today = new Date().toDateString();
            if (checkIns[today]) {
                const goalItem = document.querySelector('.goal-item');
                const checkButtons = goalItem.querySelector('.check-buttons');
                checkButtons.innerHTML = `<div class="status-badge status-${checkIns[today]}">${checkIns[today]}</div>`;
            }
        };
        
        // Fetch real data from your backend (when connected)
        async function fetchDashboardData() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/dashboard/stats`);
                if (response.ok) {
                    const stats = await response.json();
                    document.getElementById('todayEntries').textContent = stats.todayEntries;
                    document.getElementById('todayRespected').textContent = stats.todayRespected;
                    document.getElementById('todayChallenged').textContent = stats.todayChallenged;
                }
            } catch (error) {
                console.log('Backend not connected yet');
            }
        }
        
        // Try to fetch real data every 30 seconds
        setInterval(fetchDashboardData, 30000);
        fetchDashboardData(); // Initial load
    </script>
</body>
</html>